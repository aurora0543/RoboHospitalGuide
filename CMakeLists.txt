cmake_minimum_required(VERSION 3.10)

# é¡¹ç›®åç§°
project(RoboHospitalGuide)

# è®¾ç½® C++ æ ‡å‡†
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_C_STANDARD 99)

# è®¾ç½®ç¼–è¯‘é€‰é¡¹ï¼ˆä¼˜åŒ–ã€è­¦å‘Šï¼‰
add_compile_options(-Wall -Wextra -Wpedantic -O2)

# è®¾å®š include ç›®å½•
include_directories(include)

# æŸ¥æ‰¾æ‰€æœ‰æºæ–‡ä»¶
file(GLOB_RECURSE SOURCES
    "src/core/*.c"
    "src/drivers/*.c"
    "src/drivers/hal/*.c"
    "src/*.cpp"
)

# ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶
add_executable(RoboHospitalGuide ${SOURCES})

# é“¾æ¥å¿…è¦çš„åº“ï¼ˆå¦‚ I2Cã€GPIOã€WiringPi ç­‰ï¼‰
target_link_libraries(RoboHospitalGuide
    pthread         # çº¿ç¨‹åº“
    m              # æ•°å­¦åº“
    wiringPi       # Raspberry Pi GPIO æ§åˆ¶åº“
    rt             # å®æ—¶åº“ (real-time library)
)

find_package(OpenCV REQUIRED)
include_directories(${OpenCV_INCLUDE_DIRS})
target_link_libraries(RoboHospitalGuide ${OpenCV_LIBS})

# æ‰“å°ä¿¡æ¯
message(STATUS "ğŸ“¦ Building RoboHospitalGuide with ${CMAKE_CXX_COMPILER}")
message(STATUS "ğŸ“‚ Source files: ${SOURCES}")